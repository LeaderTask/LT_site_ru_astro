---
interface Props {
	icon?: string;
	id?: string;
	iconsClass?: string;
	variant?: 'primary' | 'secondary' | 'primary-stroke' | 'dark' | 'white';
	size?: 'sm' | 'md' | 'lg';
	href?: string;
	clickEffect?: boolean;
	customClass?: string;
	target?: '_self' | '_blank';
	hrefTextColor?: string;
	rel?: string;
}

const {
	size = 'md',
	variant = 'primary',
	clickEffect = false,
	rel,
	icon,
	id,
	iconsClass,
	href,
	customClass,
	target,
	hrefTextColor,
} = Astro.props;

const isLink = !!href;
const Tag = isLink ? 'a' : 'button';

const classes = [
	'app-button',
	'transition-colors cursor-pointer duration-200 relative overflow-hidden',
	clickEffect && 'app-button--ripple',
	variant === 'primary' && 'bg-accent-orange text-white hover:bg-accent-orange-dark active:bg-accent-orange-dark font-bold',
	variant === 'primary-stroke' &&
		'text-accent-orange border font-semibold border-accent-orange text-[12px] lg:text-[16px] hover:bg-accent-orange-dark bg-transparent hover:text-white active:bg-accent-orange-dark active:text-white',
	variant === 'secondary' && 'bg-transparent hover:bg-gray-light text-primary px-3 py-2 active:bg-gray-light',
	variant === 'dark' && 'bg-dark text-white hover:bg-dark-hover active:bg-dark-hover',
	variant === 'white' && 'bg-white text-accent-orange hover:bg-orange-light active:bg-orange-light font-semibold',
	size === 'sm' && 'px-2 py-1 rounded-2',
	size === 'md' && 'px-3 py-2 rounded-2',
	size === 'lg' && 'px-3 py-2 lg:px-6 lg:py-4 text-sm lg:text-[22px] leading-6 rounded-3 font-bold',
	icon && 'gap-1.5 flex items-center',
	href && 'no-underline',
	href && !hrefTextColor && 'text-white!',
	href && hrefTextColor && `!text-[${hrefTextColor}]`,
	customClass,
]
	.filter(Boolean)
	.join(' ');

const buttonId = id || `app-button-${Math.random().toString(36).substr(2, 9)}`;
---

<Tag
	id={buttonId}
	href={isLink ? href : undefined}
	target={isLink ? target : undefined}
	rel={isLink ? rel : undefined}
	class={classes}
	data-click-effect={clickEffect}
>
	{
		icon && (
			<svg class={iconsClass}>
				<use href={`/icons/all-icons.svg#${icon}`} />
			</svg>
		)
	}
	<slot />
</Tag>

<style>
	.app-button {
		position: relative;
		overflow: hidden;
	}

	.app-button--ripple::after {
		content: '';
		position: absolute;
		left: 50%;
		top: 50%;
		width: var(--ripple-size, 12rem);
		height: var(--ripple-size, 12rem);
		border-radius: 9999px;
		background-color: currentColor;
		pointer-events: none;
		mix-blend-mode: screen;
		opacity: 0;
		transform: translate(-50%, -50%) scale(1);
		transition:
			transform 600ms ease-out,
			opacity 600ms ease-out;
	}

	.app-button--ripple:active::after {
		opacity: 0.35;
		transform: translate(-50%, -50%) scale(0.2);
		transition: none;
	}
</style>
