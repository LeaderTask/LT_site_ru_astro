---
import PricingCtaButton from '@/shared/ui/PricingCtaButton/PricingCtaButton.astro';

interface Feature {
	title: string;
	description: string;
}

interface Props {
	title: string;
	subtitle: string;
	price: number;
	priceDescription: string;
	buttonText: string;
	featuresTitle: string;
	features: Feature[];
	planType: 'free' | 'premium' | 'business';
}

const { title, subtitle, price, priceDescription, buttonText, featuresTitle, features, planType } = Astro.props;

const bgColorClass = planType === 'free' ? 'bg-gray-light' : planType === 'premium' ? 'bg-orange-light' : 'bg-purple-light';

const checkmarkColor = planType === 'free' ? 'text-secondary' : planType === 'premium' ? 'text-accent-orange' : 'text-accent-blue';
---

<div class="pricing-card flex flex-col rounded-4 overflow-hidden bg-white">
	<div class={`p-4 md:p-8 rounded-4 ${bgColorClass} lg:h-72`}>
		<div class="mb-2 md:mb-4">
			<h2 class="font-bold text-[18px] leading-6 mb-1 md:text-[24px] md:leading-8 text-primary">{title}</h2>
			<p class="font-regular text-[16px] leading-6 text-secondary">{subtitle}</p>
		</div>

		<div class="mb-6 md:mb-8">
			<div class="flex items-baseline gap-2">
				{
					price > 0 ? (
						<span class="font-bold text-[44px] leading-13 text-primary">{price} â‚½</span>
					) : (
						<span class="font-bold text-[44px] leading-13 text-primary">0</span>
					)
				}
				<span class="text-[16px] leading-6 text-secondary">{priceDescription}</span>
			</div>
		</div>

		<PricingCtaButton
			text={buttonText}
			planType={planType}
		/>
	</div>

	<div class="pt-6 pb-4 px-4 md:p-8 bg-white">
		<div>
			<h3 class="font-medium text-[18px] leading-6 md:text-[20px] md:leading-8 text-primary mb-4">
				{featuresTitle}
			</h3>

			<div class="space-y-2 md:space-y-4">
				{
					features.map((feature: Feature) => (
						<div class="flex items-start gap-3">
							<svg class={`w-5 h-5 ${checkmarkColor}`}>
								<use href="/icons/all-icons.svg#icon-check-mark" />
							</svg>
							<div class="flex-1">
								<p class="font-regular text-[16px] leading-6 text-primary mb-1">{feature.title}</p>
								<p class="font-regular text-[14px] leading-6 text-secondary">{feature.description}</p>
							</div>
						</div>
					))
				}
			</div>
		</div>
	</div>
</div>

<style>
	.pricing-card {
		box-shadow:
			0 4px 8px rgba(0, 0, 0, 0.01),
			0 15px 15px rgba(0, 0, 0, 0.01),
			0 35px 21px rgba(0, 0, 0, 0.01);
		transition:
			box-shadow 0.3s ease,
			transform 0.3s ease;
	}

	button:active {
		transform: scale(0.98);
	}
</style>
